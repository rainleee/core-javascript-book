- 기본형은 값이 담긴 주솟값을 바로 복제하는 반면 참조형은 값이 담긴 주솟값들로 이루어진 묶음을 가리키는 주솟값을 복제한다는 점이 다르다.

## 식별자와 변수

- 보통 변수(variable)와 식별자(identifier)를 혼용하는 경우가 많지만 둘의 차이를 명확히 알고 있어야한다.

### 변수

- `변할 수 있는 수`. 수학 용어를 차용했기 때문에 숫자를 의미하는 '수'가 붙었을 뿐, 값이 반드시 '숫자'여야 하는 것은 아니다. 영어단 variable은 원래 `변할 수 있다`라는 형용사이지만 컴퓨터 용어로 쓸 때는 **변할 수 있는 무언가**라는 명사로 확장 시킴
- 여기서 '무언가'란 **데이터**를 말한다. 숫자, 문자열, 객체, 배열 모두 데이터다.

### 식별자

- 어떤 데이터를 식별하는데 사용하는 이름, **즉 변수명**

## 변수 선언과 데이터 할당

- 변수선언의 동작원리를 알아보자

![데이터할당1](../image/01.데이터타입/데이터할당1.png)
![데이터할당2](../image/01.데이터타입/데이터할당2.png)

- 데이터의 성질에 따라 `변수 영역`, `데이터 영역`으로 구분하여 이해하면 좋다. (정식 명칭은 아니다)

### 왜 변수 영역에 값을 직접 대입하지 않고 한 단계를 거쳐 데이터를 저장할까?

- 데이터의 변환을 자유롭게 할 수 있게 함과 동시에 메모리를 더욱 효율적으로 관리하기 위한 고민의 결과이다.
- 만약 미리 확보된 공간 내에서만 데이터를 변환을 할 수 있다면 변환한 데이터를 다시 저장하기 위해서는 `확보된 공간을 변환된 데이터 크기에 맞게 늘리는 작업`이 선행돼야 한다.
  - 해당 공간이 메모리상의 가장 마지막에 있었다면, 뒤쪽만 늘리면 되지만 중간에 있는 경우는 복잡한 작업을 수행해야한다.
  - 메모리 값을 참조하기 때문에 변수 영역과 데이터 영역을 분리하면 중복된 데이터에 대한 처리 효율이 높아진다.

## 기본형 데이터와 참조형 데이터

- 변수(variable)와 상수(constant)를 구분하는 성질은 `변경 가능성`이다. 바꿀 수 있으면 변수, 바꿀 수 없으면 상수이다.
- **불변값과 상수를 같은 개념으로 오해하기 쉬운데, 이둘을 명확히 구분할 필요가 있다.**
  - 변수와 상수를 구분 짓는 변경 가능성의 대상은 `변수 영역` 메모리이다. 한 번 데이터 할당이 이뤄진 변수 공간에 다른 데이터를 재할당할 수 있는지 여부가 관건이다.
  - 불변성 여부를 구분할 때의 변경 가능성의 대상은 `데이터 영역` 메모리이다.

![가변값1](../image/01.데이터타입/가변값1.png)
![가변값2](../image/01.데이터타입/가변값2.png)
![가변값3](../image/01.데이터타입/가변값3.png)
![가변값4](../image/01.데이터타입/가변값4.png)

### GC(가비지 컬렉터)

- 런타임 환경에 따라 특정 시점이나 메모리 사용량이 포화 상태에 임박할 떄마다 자동으로 수거 대상들을 수거한다.
- 어떤 데이터에 대해 자신의 주소를 참조하는 변수의 개수를 참조 카운트라고 한다.
- 참조 카운트가 `0`인 메모리 주소는 가비지 컬렉터의 수거 대상이 된다.

## 기본/참조형 변수 복사 비교

![변수복사비교](../image/01.데이터타입/변수복사비교1.png)

- 변수를 복사하는 과정은 기본형 데이터와 참조형 데이터 모두 같은 주소를 바라보게 되는 점에서 동일하다. 하지만 데이터 할당 과정에서 차이가 있기 떄문에 변수 복사 이후의 동작에도 큰 차이가 발생한다.

- `기본형은 값을 복사하고 참조형은 주솟값을 복사한다`고 설명하고 있지만, 사실은 어떤 데이터 타입이든 변수에 할당하기 위해서는 주솟값을 복사해야 하기 떄문에, 엄밀히 따지면 **자바스크립트의 모든 데이터 타입은 참조형 데이터**일 수밖에 없다.

| 기본형 | 참조형 |
|-----|-----|
| 주솟값 복사 1번  | 주솟값 복사 n번  |

## 불변객체

- 참조형 데이터의 `가변`은 데이터 자체가 아닌 내부 프로퍼티를 변경할 때만 성립한다. 데이터 자체를 변경하고자 하면(새로운 데이터를 할당하고자 하면) 기본형 데이터와 마찬가지로 **기존 데이터는 변하지 않는다.**
- 값으로 전달받은 객체에 변경을 가하더라도 원본 객체는 변하지 않아야 하는 경우 불변 객체가 필요하다.
- 불변 객체는 객체가 가지고 있는 값을 변경할 수 없는 객체를 의미하여 값이 변경될 경우, 새로운 객체를 생성하고 변경된 값을 주입하여 반환해야 한다. 이와는 달리, 가변 객체는 해당 객체의 값이 변경될 경우 값을 변경한다.
  - `01.데이터타입/immutableObject.js` [코드예제](https://github.com/rainleee/core-javascript-book/blob/main/01.%EB%8D%B0%EC%9D%B4%ED%84%B0%ED%83%80%EC%9E%85/immutableObject.js) 참조

### 얕은 복사와 깊은 복사

- 얕은 복사(shallow copy)는 바로 아래 단계의 값만 복사하는 방법이고, 깊은 복사(deep copy)는 내부의 모든 값들을 하나하나 찾아서 전부 복사하는 방법이다.
- 얕은 복사는 중첩된 객체에서 참조형 데이터가 저장된 프로퍼티를 복사할 때 그 주솟값만 복사한다는 의미로 해당 프로퍼티에 대해 원본과 사본이 모두 동일한 참조형 데이터의 주소를 가리킨다. `사본 === 원본 true`가 성립한다.

## undefined와 null

- `undefined`는 사용자가 명시적으로 지정할 수도 있지만 값이 존재하지 않을 때 자바스크립트 엔진이 자동으로 부여하는 경우도 있다.